"use strict";(self.webpackChunktech_job_site=self.webpackChunktech_job_site||[]).push([[669],{9669:($,C,o)=>{o.r(C),o.d(C,{AdminModule:()=>c});var u=o(9808),m=o(9516),s=o(5e3);let g=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(l){return new(l||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-admin-welcome"]],decls:3,vars:0,template:function(l,f){1&l&&(s.TgZ(0,"h1"),s._uU(1,"Bem vindo ao admin do Tech Job no Exterior"),s.qZA(),s._uU(2," Para come\xe7ar, selecione no menu ao lado qual conte\xfado deseja administrar."))},styles:[""]}),i})();var A=o(6831);function b(i,h){if(1&i){const l=s.EpF();s.TgZ(0,"div",8),s.NdJ("click",function(){const O=s.CHM(l).$implicit;return s.oxw().selectCollection(O)}),s.ALo(1,"async"),s._uU(2),s.qZA()}if(2&i){const l=h.$implicit,f=s.oxw();s.Tol(s.lcZ(1,4,f.selectedCollection$)===l?"selected":""),s.xp6(2),s.hij(" ",l.title," ")}}const E=[{path:"",component:(()=>{class i{constructor(l){this.router=l,this.collections=[{title:"Alunos",url:"student"},{title:"Cursos",url:"course"}],this.selectedCollection$=new A.t}ngOnInit(){let l;const I=this.router.url.match(/admin\/?([a-zA-Z0-9-_]+)\/?/);if(null!=I){l=I[1];const O=this.collections.find(x=>x.url===l);this.selectCollection(O)}}selectCollection(l){this.selectedCollection$.next(l),this.router.navigate([`admin/${l.url}`])}}return i.\u0275fac=function(l){return new(l||i)(s.Y36(m.F0))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-admin"]],decls:13,vars:1,consts:[[1,"holder"],[1,"row",2,"height","calc(100% - 50px)"],[1,"nav"],[1,"title"],[1,"list"],["class","box",3,"class","click",4,"ngFor","ngForOf"],["name","sidebar"],[1,"content-holder"],[1,"box",3,"click"]],template:function(l,f){1&l&&(s.TgZ(0,"div",0),s.TgZ(1,"h1"),s._uU(2,"Admin"),s.qZA(),s.TgZ(3,"div",1),s.TgZ(4,"div",2),s.TgZ(5,"section"),s.TgZ(6,"div",3),s._uU(7," Conte\xfado "),s.qZA(),s.TgZ(8,"div",4),s.YNc(9,b,3,6,"div",5),s.qZA(),s.qZA(),s._UZ(10,"router-outlet",6),s.qZA(),s.TgZ(11,"div",7),s._UZ(12,"router-outlet"),s.qZA(),s.qZA(),s.qZA()),2&l&&(s.xp6(9),s.Q6J("ngForOf",f.collections))},directives:[u.sg,m.lC],pipes:[u.Ov],styles:[".holder[_ngcontent-%COMP%]{padding:25px;height:calc(100% - 144px)}  .nav{flex-basis:25%;border:1px solid #ccc;background:#fff;overflow-y:auto}  .nav section{margin:5px}  .nav .title{border-bottom:2px solid #367a49;color:#367a49;padding-left:6px;line-height:34px}  .nav .title .add-button{float:right;padding:0;margin:4px;min-width:0;line-height:normal}  .nav .list{border:1px solid #ccc;background:#fff}  .nav .list .box{padding:7px;cursor:pointer;font-size:14px}  .nav .list .box:hover{background-color:#efefef}  .nav .list .box.selected{border:2px solid #ccc;border-right-width:6px;padding:5px 1px 5px 5px}  .nav .list .box mat-icon{float:left;margin-right:5px}  .nav button{margin:10px}  .content-holder{flex-basis:75%;border:1px solid #ccc;background:#fff;padding:10px;margin-left:-1px}  .content-holder .form{display:flex;flex-direction:column;height:100%}  .content-holder .form .top-nav{display:flex;flex-direction:row;padding-bottom:10px;width:100%}  .content-holder .form .top-nav h3{flex:1;margin:0;font-size:1.2em}  .content-holder .form .top-nav .mat-checkbox{line-height:2.5em;padding-right:20px}  .content-holder .form .row{display:flex;flex-direction:row;grid-gap:10px;gap:10px}  .content-holder .form .row mat-form-field{flex:1}  .content-holder .form form{overflow-y:auto;flex:1}  .content-holder .form.hidden{display:none}  ::-webkit-scrollbar{-webkit-appearance:none;width:7px}  ::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80}"]}),i})(),children:[{path:"",component:g},{path:"course",loadChildren:()=>Promise.all([o.e(833),o.e(488),o.e(446),o.e(728)]).then(o.bind(o,3728)).then(i=>i.AdminCourseModule)},{path:"student",loadChildren:()=>Promise.all([o.e(833),o.e(125),o.e(446),o.e(326)]).then(o.bind(o,326)).then(i=>i.AdminStudentModule)}]}];let n=(()=>{class i{}return i.\u0275fac=function(l){return new(l||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[[m.Bz.forChild(E)],m.Bz]}),i})();var e=o(9594),d=o(5727);let c=(()=>{class i{}return i.\u0275fac=function(l){return new(l||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[e.h,d.X],imports:[[u.ez,n]]}),i})()},9594:($,C,o)=>{o.d(C,{h:()=>b});var u=o(6831),m=o(7224),s=o(6102),g=o(5e3),A=o(9516);let b=(()=>{class p{constructor(n,e){this.router=n,this.selectedCourse$=new u.t,this.selectedLesson$=new u.t,this.selectedFragment$=new u.t,this.crudCourses=e(),this.crudLessons=e(),this.crudFragments=e(),this.crudCourses.setDbPath("/courses")}loadAllCourses(){return this.crudCourses.setDbPath("/courses"),this.courseCollection$=this.crudCourses.getAll(!0),this.courseCollection$}loadAllLessons(){return this.crudLessons.setDbPath(`/courses/${this.selectedCourse.url}/lessons`),this.lessonCollection$=this.crudLessons.getAll(!0),this.lessonCollection$}loadAllFragments(){return this.crudFragments.setDbPath(`/courses/${this.selectedCourse.url}/lessons/${this.selectedLesson.url}/fragments`),this.fragmentCollection$=this.crudFragments.getAll(!0),this.fragmentCollection$}selectCourse(n){var e;this.selectedCourse=n,this.selectedCourse$.next(n),this.router.navigate([`admin/course/${null===(e=this.selectedCourse)||void 0===e?void 0:e.url}`]),this.loadAllLessons()}selectLesson(n){var e,d;this.selectedLesson=n,this.selectedLesson$.next(n),this.router.navigate([`admin/course/${null===(e=this.selectedCourse)||void 0===e?void 0:e.url}/${null===(d=this.selectedLesson)||void 0===d?void 0:d.url}`]),this.loadAllFragments()}selectFragment(n){var e,d,c;this.selectedFragment=n,this.selectedFragment$.next(n),this.router.navigate([`admin/course/${null===(e=this.selectedCourse)||void 0===e?void 0:e.url}/${null===(d=this.selectedLesson)||void 0===d?void 0:d.url}/${null===(c=this.selectedFragment)||void 0===c?void 0:c.url}`])}newCourse(){this.selectedCourse=void 0,this.selectedCourse$.next(void 0),this.selectedLesson=void 0,this.selectedLesson$.next(void 0),this.selectedFragment=void 0,this.selectedFragment$.next(void 0),this.router.navigate(["admin/course/new"])}newLesson(){var n;this.selectedLesson=void 0,this.selectedLesson$.next(void 0),this.selectedFragment=void 0,this.selectedFragment$.next(void 0),this.router.navigate([`admin/course/${null===(n=this.selectedCourse)||void 0===n?void 0:n.url}/new`])}newFragment(){var n,e;this.selectedFragment=void 0,this.selectedFragment$.next(void 0),this.router.navigate([`admin/course/${null===(n=this.selectedCourse)||void 0===n?void 0:n.url}/${null===(e=this.selectedLesson)||void 0===e?void 0:e.url}/new`])}saveCourse(n,e,d){n?this.courseCollection$.pipe((0,m.P)()).subscribe(c=>{e.order=c.length+1,this.crudCourses.create(e).subscribe(d)}):this.crudCourses.update(e.url,e).subscribe(d)}saveLesson(n,e,d){n?this.lessonCollection$.pipe((0,m.P)()).subscribe(c=>{e.order=c.length+1,this.crudLessons.create(e).subscribe(d)}):this.crudLessons.update(e.url,e).subscribe(d)}saveFragment(n,e,d){n?this.fragmentCollection$.pipe((0,m.P)()).subscribe(c=>{e.order=c.length+1,this.crudFragments.create(e).subscribe(d)}):this.crudFragments.update(e.url,e).subscribe(d)}dropCourse(n){var e;n.currentIndex!==n.previousIndex&&(null===(e=this.courseCollection$)||void 0===e||e.pipe((0,m.P)()).subscribe(d=>{this.crudCourses.rearrangeAndSave(d,n.previousIndex,n.currentIndex)}))}dropLesson(n){var e;n.currentIndex!==n.previousIndex&&(null===(e=this.lessonCollection$)||void 0===e||e.pipe((0,m.P)()).subscribe(d=>{this.crudLessons.rearrangeAndSave(d,n.previousIndex,n.currentIndex)}))}dropFragment(n){var e;n.currentIndex!==n.previousIndex&&(null===(e=this.fragmentCollection$)||void 0===e||e.pipe((0,m.P)()).subscribe(d=>{this.crudFragments.rearrangeAndSave(d,n.previousIndex,n.currentIndex)}))}}return p.\u0275fac=function(n){return new(n||p)(g.LFG(A.F0),g.LFG(s.N))},p.\u0275prov=g.Yz7({token:p,factory:p.\u0275fac,providedIn:"any"}),p})()},5727:($,C,o)=>{o.d(C,{X:()=>E});var u=o(5525),m=o(5254),s=o(1086),g=o(4850),A=o(2868),b=o(5e3),p=o(4471);let E=(()=>{class n{constructor(d){this.loading=d,this.dbPath="/user-progresses",this.progressMemo={},this.db=(0,u.ad)()}getStudents(){this.loading.start();const d=(0,u.IO)((0,u.hJ)(this.db,this.dbPath),(0,u.Xo)("displayName","asc"));return(0,m.D)((0,u.PL)(d)).pipe((0,g.U)(c=>(c.forEach(i=>{const h=i.data();h.firebaseDocumentId=i.id,this.progressMemo[i.id]=h}),this.progressMemo))).pipe((0,A.b)(()=>this.loading.finish()))}loadCoursesProgress(d){const c=d.firebaseDocumentId;if(null!=this.progressMemo[c].courses)return(0,s.of)(this.progressMemo[c].courses);this.loading.start();const i=(0,u.IO)((0,u.hJ)(this.db,`${this.dbPath}/${c}/courses`));return(0,m.D)((0,u.PL)(i)).pipe((0,g.U)(h=>{const l={};return h.forEach(f=>{l[f.id]=f.data()}),this.progressMemo[c].courses=l,l})).pipe((0,A.b)(()=>this.loading.finish()))}}return n.\u0275fac=function(d){return new(d||n)(b.LFG(p.b))},n.\u0275prov=b.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})()},6831:($,C,o)=>{o.d(C,{t:()=>I});var u=o(8929),m=o(6686),g=o(2268);const p=new class extends g.v{}(class extends m.o{constructor(t,r){super(t,r),this.scheduler=t,this.work=r}schedule(t,r=0){return r>0?super.schedule(t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)}execute(t,r){return r>0||this.closed?super.execute(t,r):this._execute(t,r)}requestAsyncId(t,r,a=0){return null!==a&&a>0||null===a&&this.delay>0?super.requestAsyncId(t,r,a):t.flush(this)}});var E=o(2654),n=o(3489),e=o(9312);class i extends n.L{constructor(t,r,a=0){super(t),this.scheduler=r,this.delay=a}static dispatch(t){const{notification:r,destination:a}=t;r.observe(a),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(i.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(e.P.createNext(t))}_error(t){this.scheduleMessage(e.P.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(e.P.createComplete()),this.unsubscribe()}}class h{constructor(t,r){this.notification=t,this.destination=r}}var l=o(5279),f=o(5283);class I extends u.xQ{constructor(t=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,a){super(),this.scheduler=a,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const r=this._events;r.push(t),r.length>this._bufferSize&&r.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new O(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const r=this._infiniteTimeWindow,a=r?this._events:this._trimBufferThenGetEvents(),P=this.scheduler,T=a.length;let v;if(this.closed)throw new l.N;if(this.isStopped||this.hasError?v=E.w.EMPTY:(this.observers.push(t),v=new f.W(this,t)),P&&t.add(t=new i(t,P)),r)for(let M=0;M<T&&!t.closed;M++)t.next(a[M]);else for(let M=0;M<T&&!t.closed;M++)t.next(a[M].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),v}_getNow(){return(this.scheduler||p).now()}_trimBufferThenGetEvents(){const t=this._getNow(),r=this._bufferSize,a=this._windowTime,P=this._events,T=P.length;let v=0;for(;v<T&&!(t-P[v].time<a);)v++;return T>r&&(v=Math.max(v,T-r)),v>0&&P.splice(0,v),P}}class O{constructor(t,r){this.time=t,this.value=r}}}}]);