"use strict";(self.webpackChunktech_job_site=self.webpackChunktech_job_site||[]).push([[669],{9669:(O,C,o)=>{o.r(C),o.d(C,{AdminModule:()=>F});var h=o(9808),m=o(6102),E=o(7263),g=o(4471),A=o(6284),I=o(3071),a=o(9516),s=o(5e3);let n=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-admin-welcome"]],decls:3,vars:0,template:function(e,i){1&e&&(s.TgZ(0,"h1"),s._uU(1,"Bem vindo ao admin do Tech Job no Exterior"),s.qZA(),s._uU(2," Para come\xe7ar, selecione no menu ao lado qual conte\xfado deseja administrar."))},styles:[""]}),r})();var t=o(6831);function d(r,u){if(1&r){const e=s.EpF();s.TgZ(0,"div",8),s.NdJ("click",function(){const v=s.CHM(e).$implicit;return s.oxw().selectCollection(v)}),s.ALo(1,"async"),s._uU(2),s.qZA()}if(2&r){const e=u.$implicit,i=s.oxw();s.Tol(s.lcZ(1,4,i.selectedCollection$)===e?"selected":""),s.xp6(2),s.hij(" ",e.title," ")}}const f=[{path:"",component:(()=>{class r{constructor(e){this.router=e,this.collections=[{title:"Alunos",url:"student"},{title:"Cursos",url:"course"}],this.selectedCollection$=new t.t}ngOnInit(){let e;const l=this.router.url.match(/admin\/?([a-zA-Z0-9-_]+)\/?/);if(null!=l){e=l[1];const v=this.collections.find(x=>x.url===e);this.selectCollection(v)}}selectCollection(e){this.selectedCollection$.next(e),this.router.navigate([`admin/${e.url}`])}}return r.\u0275fac=function(e){return new(e||r)(s.Y36(a.F0))},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-admin"]],decls:13,vars:1,consts:[[1,"holder"],[1,"row",2,"height","calc(100% - 50px)"],[1,"nav"],[1,"title"],[1,"list"],["class","box",3,"class","click",4,"ngFor","ngForOf"],["name","sidebar"],[1,"content-holder"],[1,"box",3,"click"]],template:function(e,i){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"h1"),s._uU(2,"Admin"),s.qZA(),s.TgZ(3,"div",1),s.TgZ(4,"div",2),s.TgZ(5,"section"),s.TgZ(6,"div",3),s._uU(7," Conte\xfado "),s.qZA(),s.TgZ(8,"div",4),s.YNc(9,d,3,6,"div",5),s.qZA(),s.qZA(),s._UZ(10,"router-outlet",6),s.qZA(),s.TgZ(11,"div",7),s._UZ(12,"router-outlet"),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(9),s.Q6J("ngForOf",i.collections))},directives:[h.sg,a.lC],pipes:[h.Ov],styles:[".holder[_ngcontent-%COMP%]{padding:25px;height:calc(100% - 144px)}  .nav{flex-basis:25%;border:1px solid #ccc;background:#fff;overflow-y:auto}  .nav section{margin:5px}  .nav .title{border-bottom:2px solid #367a49;color:#367a49;padding-left:6px;line-height:34px}  .nav .title .add-button{float:right;padding:0;margin:4px;min-width:0;line-height:normal}  .nav .list{border:1px solid #ccc;background:#fff}  .nav .list .box{padding:7px;cursor:pointer;font-size:14px}  .nav .list .box:hover{background-color:#efefef}  .nav .list .box.selected{border:2px solid #ccc;border-right-width:6px;padding:5px 1px 5px 5px}  .nav .list .box mat-icon{float:left;margin-right:5px}  .nav button{margin:10px}  .content-holder{flex-basis:75%;border:1px solid #ccc;background:#fff;padding:10px;margin-left:-1px}  .content-holder .form{display:flex;flex-direction:column;height:100%}  .content-holder .form .top-nav{display:flex;flex-direction:row;padding-bottom:10px;width:100%}  .content-holder .form .top-nav h3{flex:1;margin:0;font-size:1.2em}  .content-holder .form .top-nav .mat-checkbox{line-height:2.5em;padding-right:20px}  .content-holder .form .row{display:flex;flex-direction:row;grid-gap:10px;gap:10px}  .content-holder .form .row mat-form-field{flex:1}  .content-holder .form form{overflow-y:auto;flex:1}  .content-holder .form.hidden{display:none}  ::-webkit-scrollbar{-webkit-appearance:none;width:7px}  ::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80}"]}),r})(),children:[{path:"",component:n},{path:"course",loadChildren:()=>Promise.all([o.e(833),o.e(488),o.e(446),o.e(728)]).then(o.bind(o,3728)).then(r=>r.AdminCourseModule)},{path:"student",loadChildren:()=>Promise.all([o.e(833),o.e(125),o.e(446),o.e(326)]).then(o.bind(o,326)).then(r=>r.AdminStudentModule)}]}];let b=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=s.oAB({type:r}),r.\u0275inj=s.cJS({imports:[[a.Bz.forChild(f)],a.Bz]}),r})();var P=o(9594),T=o(5727);let F=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=s.oAB({type:r}),r.\u0275inj=s.cJS({providers:[P.h,T.X,{provide:m.N,useFactory:E.B,deps:[g.b,A.z,I.K]}],imports:[[h.ez,b]]}),r})()},9594:(O,C,o)=>{o.d(C,{h:()=>I});var h=o(6831),m=o(7224),E=o(6102),g=o(5e3),A=o(9516);let I=(()=>{class a{constructor(n,t){this.router=n,this.selectedCourse$=new h.t,this.selectedLesson$=new h.t,this.selectedFragment$=new h.t,this.crudCourses=t(),this.crudLessons=t(),this.crudFragments=t(),this.crudCourses.setDbPath("/courses")}loadAllCourses(){return this.crudCourses.setDbPath("/courses"),this.courseCollection$=this.crudCourses.getAll(!0),this.courseCollection$}loadAllLessons(){return this.crudLessons.setDbPath(`/courses/${this.selectedCourse.url}/lessons`),this.lessonCollection$=this.crudLessons.getAll(!0),this.lessonCollection$}loadAllFragments(){return this.crudFragments.setDbPath(`/courses/${this.selectedCourse.url}/lessons/${this.selectedLesson.url}/fragments`),this.fragmentCollection$=this.crudFragments.getAll(!0),this.fragmentCollection$}selectCourse(n){var t;this.selectedCourse=n,this.selectedCourse$.next(n),this.router.navigate([`admin/course/${null===(t=this.selectedCourse)||void 0===t?void 0:t.url}`]),this.loadAllLessons()}selectLesson(n){var t,d;this.selectedLesson=n,this.selectedLesson$.next(n),this.router.navigate([`admin/course/${null===(t=this.selectedCourse)||void 0===t?void 0:t.url}/${null===(d=this.selectedLesson)||void 0===d?void 0:d.url}`]),this.loadAllFragments()}selectFragment(n){var t,d,c;this.selectedFragment=n,this.selectedFragment$.next(n),this.router.navigate([`admin/course/${null===(t=this.selectedCourse)||void 0===t?void 0:t.url}/${null===(d=this.selectedLesson)||void 0===d?void 0:d.url}/${null===(c=this.selectedFragment)||void 0===c?void 0:c.url}`])}newCourse(){this.selectedCourse=void 0,this.selectedCourse$.next(void 0),this.selectedLesson=void 0,this.selectedLesson$.next(void 0),this.selectedFragment=void 0,this.selectedFragment$.next(void 0),this.router.navigate(["admin/course/new"])}newLesson(){var n;this.selectedLesson=void 0,this.selectedLesson$.next(void 0),this.selectedFragment=void 0,this.selectedFragment$.next(void 0),this.router.navigate([`admin/course/${null===(n=this.selectedCourse)||void 0===n?void 0:n.url}/new`])}newFragment(){var n,t;this.selectedFragment=void 0,this.selectedFragment$.next(void 0),this.router.navigate([`admin/course/${null===(n=this.selectedCourse)||void 0===n?void 0:n.url}/${null===(t=this.selectedLesson)||void 0===t?void 0:t.url}/new`])}saveCourse(n,t,d){n?this.courseCollection$.pipe((0,m.P)()).subscribe(c=>{t.order=c.length+1,this.crudCourses.create(t).subscribe(d)}):this.crudCourses.update(t.url,t).subscribe(d)}saveLesson(n,t,d){n?this.lessonCollection$.pipe((0,m.P)()).subscribe(c=>{t.order=c.length+1,this.crudLessons.create(t).subscribe(d)}):this.crudLessons.update(t.url,t).subscribe(d)}saveFragment(n,t,d){n?this.fragmentCollection$.pipe((0,m.P)()).subscribe(c=>{t.order=c.length+1,this.crudFragments.create(t).subscribe(d)}):this.crudFragments.update(t.url,t).subscribe(d)}dropCourse(n){var t;n.currentIndex!==n.previousIndex&&(null===(t=this.courseCollection$)||void 0===t||t.pipe((0,m.P)()).subscribe(d=>{this.crudCourses.rearrangeAndSave(d,n.previousIndex,n.currentIndex)}))}dropLesson(n){var t;n.currentIndex!==n.previousIndex&&(null===(t=this.lessonCollection$)||void 0===t||t.pipe((0,m.P)()).subscribe(d=>{this.crudLessons.rearrangeAndSave(d,n.previousIndex,n.currentIndex)}))}dropFragment(n){var t;n.currentIndex!==n.previousIndex&&(null===(t=this.fragmentCollection$)||void 0===t||t.pipe((0,m.P)()).subscribe(d=>{this.crudFragments.rearrangeAndSave(d,n.previousIndex,n.currentIndex)}))}}return a.\u0275fac=function(n){return new(n||a)(g.LFG(A.F0),g.LFG(E.N))},a.\u0275prov=g.Yz7({token:a,factory:a.\u0275fac,providedIn:"any"}),a})()},5727:(O,C,o)=>{o.d(C,{X:()=>s});var h=o(5525),m=o(5254),E=o(1086),g=o(4850),A=o(2868),I=o(5e3),a=o(4471);let s=(()=>{class n{constructor(d){this.loading=d,this.dbPath="/user-progresses",this.progressMemo={},this.db=(0,h.ad)()}getStudents(){this.loading.start();const d=(0,h.IO)((0,h.hJ)(this.db,this.dbPath),(0,h.Xo)("displayName","asc"));return(0,m.D)((0,h.PL)(d)).pipe((0,g.U)(c=>(c.forEach(f=>{const b=f.data();b.firebaseDocumentId=f.id,this.progressMemo[f.id]=b}),this.progressMemo))).pipe((0,A.b)(()=>this.loading.finish()))}loadCoursesProgress(d){const c=d.firebaseDocumentId;if(null!=this.progressMemo[c].courses)return(0,E.of)(this.progressMemo[c].courses);this.loading.start();const f=(0,h.IO)((0,h.hJ)(this.db,`${this.dbPath}/${c}/courses`));return(0,m.D)((0,h.PL)(f)).pipe((0,g.U)(b=>{const P={};return b.forEach(T=>{P[T.id]=T.data()}),this.progressMemo[c].courses=P,P})).pipe((0,A.b)(()=>this.loading.finish()))}}return n.\u0275fac=function(d){return new(d||n)(I.LFG(a.b))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})()},6831:(O,C,o)=>{o.d(C,{t:()=>F});var h=o(8929),m=o(6686),g=o(2268);const a=new class extends g.v{}(class extends m.o{constructor(e,i){super(e,i),this.scheduler=e,this.work=i}schedule(e,i=0){return i>0?super.schedule(e,i):(this.delay=i,this.state=e,this.scheduler.flush(this),this)}execute(e,i){return i>0||this.closed?super.execute(e,i):this._execute(e,i)}requestAsyncId(e,i,l=0){return null!==l&&l>0||null===l&&this.delay>0?super.requestAsyncId(e,i,l):e.flush(this)}});var s=o(2654),n=o(3489),t=o(9312);class f extends n.L{constructor(e,i,l=0){super(e),this.scheduler=i,this.delay=l}static dispatch(e){const{notification:i,destination:l}=e;i.observe(l),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(f.dispatch,this.delay,new b(e,this.destination)))}_next(e){this.scheduleMessage(t.P.createNext(e))}_error(e){this.scheduleMessage(t.P.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(t.P.createComplete()),this.unsubscribe()}}class b{constructor(e,i){this.notification=e,this.destination=i}}var P=o(5279),T=o(5283);class F extends h.xQ{constructor(e=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,l){super(),this.scheduler=l,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const i=this._events;i.push(e),i.length>this._bufferSize&&i.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new r(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const i=this._infiniteTimeWindow,l=i?this._events:this._trimBufferThenGetEvents(),v=this.scheduler,x=l.length;let p;if(this.closed)throw new P.N;if(this.isStopped||this.hasError?p=s.w.EMPTY:(this.observers.push(e),p=new T.W(this,e)),v&&e.add(e=new f(e,v)),i)for(let M=0;M<x&&!e.closed;M++)e.next(l[M]);else for(let M=0;M<x&&!e.closed;M++)e.next(l[M].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),p}_getNow(){return(this.scheduler||a).now()}_trimBufferThenGetEvents(){const e=this._getNow(),i=this._bufferSize,l=this._windowTime,v=this._events,x=v.length;let p=0;for(;p<x&&!(e-v[p].time<l);)p++;return x>i&&(p=Math.max(p,x-i)),p>0&&v.splice(0,p),v}}class r{constructor(e,i){this.time=e,this.value=i}}}}]);